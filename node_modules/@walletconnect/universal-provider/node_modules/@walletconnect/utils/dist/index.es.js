import{detect as ys}from"detect-browser";import{toMiliseconds as Ke,FIVE_MINUTES as qn,fromMiliseconds as ms}from"@walletconnect/time";import{getDocument as ne,getNavigator as Kn,getLocation as Fn}from"@walletconnect/window-getters";import{getWindowMetadata as ws}from"@walletconnect/window-metadata";import{recoverAddress as xs}from"viem";import re from"bs58";import{decode as vs,encode as Es}from"@msgpack/msgpack";import{base32 as Bs}from"@scure/base";import{decodeJWT as Is}from"@walletconnect/relay-auth";import{toString as st,fromString as ft,concat as oe}from"uint8arrays";import{RELAY_JSONRPC as As}from"@walletconnect/relay-api";import{blake2b as Ss}from"blakejs";const xe=":";function Fe(t){const[e,n]=t.split(xe);return{namespace:e,reference:n}}function zn(t){const{namespace:e,reference:n}=t;return[e,n].join(xe)}function ze(t){const[e,n,r]=t.split(xe);return{namespace:e,reference:n,address:r}}function Gn(t){const{namespace:e,reference:n,address:r}=t;return[e,n,r].join(xe)}function Ge(t,e){const n=[];return t.forEach(r=>{const o=e(r);n.includes(o)||n.push(o)}),n}function Zn(t){const{address:e}=ze(t);return e}function Wn(t){const{namespace:e,reference:n}=ze(t);return zn({namespace:e,reference:n})}function Ns(t,e){const{namespace:n,reference:r}=Fe(e);return Gn({namespace:n,reference:r,address:t})}function Os(t){return Ge(t,Zn)}function Yn(t){return Ge(t,Wn)}function Us(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const o=t[r];n.push(...o.accounts)}),n}function _s(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const o=t[r];n.push(...Yn(o.accounts))}),n}function Ts(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const o=t[r];n.push(...ve(r,o))}),n}function ve(t,e){return t.includes(":")?[t]:e.chains||[]}var Rs=Object.defineProperty,$s=Object.defineProperties,Cs=Object.getOwnPropertyDescriptors,Xn=Object.getOwnPropertySymbols,Ls=Object.prototype.hasOwnProperty,js=Object.prototype.propertyIsEnumerable,Jn=(t,e,n)=>e in t?Rs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qn=(t,e)=>{for(var n in e||(e={}))Ls.call(e,n)&&Jn(t,n,e[n]);if(Xn)for(var n of Xn(e))js.call(e,n)&&Jn(t,n,e[n]);return t},ks=(t,e)=>$s(t,Cs(e));const tr="ReactNative",J={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Ee=" ",Ps=":",er="/",Ze=2,Hs=1e3,nr="js";function We(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Bt(){return!ne()&&!!Kn()&&navigator.product===tr}function Ds(){return Bt()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Ms(){return Bt()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function zt(){return!We()&&!!Kn()&&!!ne()}function Pt(){return Bt()?J.reactNative:We()?J.node:zt()?J.browser:J.unknown}function Vs(){var t;try{return Bt()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function rr(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const o=e[r];o!==void 0&&n.set(r,o)}return n.toString()}function qs(t){var e,n;const r=or();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(o=>o!=="")),ks(Qn(Qn({},r),t),{url:t?.url||r.url,name:t?.name||r.name,description:t?.description||r.description,icons:(n=t?.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(o){return console.warn("Error populating app metadata",o),t||r}}function or(){return ws()||{name:"",description:"",url:"",icons:[""]}}function Ks(t,e){var n;const r=Pt(),o={protocol:t,version:e,env:r};return r==="browser"&&(o.host=((n=Fn())==null?void 0:n.host)||"unknown"),o}function sr(){if(Pt()===J.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=ys();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ir(){var t;const e=Pt();return e===J.browser?[e,((t=Fn())==null?void 0:t.host)||"unknown"].join(":"):e}function fr(t,e,n){const r=sr(),o=ir();return[[t,e].join("-"),[nr,n].join("-"),r,o].join("/")}function Fs({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:i,bundleId:f,packageName:c}){const u=n.split("?"),a=fr(t,e,r),l={auth:o,ua:a,projectId:s,useOnCloseEvent:i||void 0,packageName:c||void 0,bundleId:f||void 0},h=rr(u[1]||"",l);return u[0]+"?"+h}function zs(t){let e=(t.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof e<"u"?t.split("://")[1]:t;return e=e==="wss"?"https":"http",[e,n].join("://")}function Gs(t,e,n){if(!t[e]||typeof t[e]!==n)throw new Error(`Missing or invalid "${e}" param`)}function cr(t,e=Ze){return ar(t.split(er),e)}function Zs(t){return cr(t).join(Ee)}function It(t,e){return t.filter(n=>e.includes(n)).length===t.length}function ar(t,e=Ze){return t.slice(Math.max(t.length-e,0))}function Ws(t){return Object.fromEntries(t.entries())}function Ys(t){return new Map(Object.entries(t))}function Xs(t,e){const n={};return Object.keys(t).forEach(r=>{n[r]=e(t[r])}),n}const Js=t=>t;function ur(t){return t.trim().replace(/^\w/,e=>e.toUpperCase())}function Qs(t){return t.split(Ee).map(e=>ur(e)).join(Ee)}function ti(t=qn,e){const n=Ke(t||qn);let r,o,s,i;return{resolve:f=>{s&&r&&(clearTimeout(s),r(f),i=Promise.resolve(f))},reject:f=>{s&&o&&(clearTimeout(s),o(f))},done:()=>new Promise((f,c)=>{if(i)return f(i);s=setTimeout(()=>{const u=new Error(e);i=Promise.reject(u),c(u)},n),r=f,o=c})}}function ei(t,e,n){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(n)),e);try{const i=await t;r(i)}catch(i){o(i)}clearTimeout(s)})}function Ye(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ni(t){return Ye("topic",t)}function ri(t){return Ye("id",t)}function oi(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function si(t,e){return ms((e||Date.now())+Ke(t))}function ii(t){return Date.now()>=Ke(t)}function fi(t,e){return`${t}${e?`:${e}`:""}`}function ct(t=[],e=[]){return[...new Set([...t,...e])]}async function ci({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const o=typeof n=="string"?JSON.parse(n):n,s=o?.href;if(typeof s!="string")return;const i=lr(s,t,e),f=Pt();if(f===J.browser){if(!((r=ne())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}dr(i)}else f===J.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(i)}catch(o){console.error(o)}}function lr(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let o=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";o=`${o}${s}${gr(r,!0)}`}else o=`${o}/wc?${r}`;return o}function dr(t){let e="_self";pr()?e="_top":(hr()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function ai(t,e){let n="";try{if(zt()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Xe(t,e){return t.filter(n=>e.includes(n))}function ui(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function li(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function di(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function hr(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function pr(){try{return window.self!==window.top}catch{return!1}}function gr(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Je(t){return Buffer.from(t,"base64").toString("utf-8")}function hi(t){return new Promise(e=>setTimeout(e,t))}const Be=BigInt(2**32-1),br=BigInt(32);function yr(t,e=!1){return e?{h:Number(t&Be),l:Number(t>>br&Be)}:{h:Number(t>>br&Be)|0,l:Number(t&Be)|0}}function mr(t,e=!1){const n=t.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let s=0;s<n;s++){const{h:i,l:f}=yr(t[s],e);[r[s],o[s]]=[i,f]}return[r,o]}const wr=(t,e,n)=>t>>>n,xr=(t,e,n)=>t<<32-n|e>>>n,At=(t,e,n)=>t>>>n|e<<32-n,St=(t,e,n)=>t<<32-n|e>>>n,se=(t,e,n)=>t<<64-n|e>>>n-32,ie=(t,e,n)=>t>>>n-32|e<<64-n,pi=(t,e)=>e,gi=(t,e)=>t,bi=(t,e,n)=>t<<n|e>>>32-n,yi=(t,e,n)=>e<<n|t>>>32-n,mi=(t,e,n)=>e<<n-32|t>>>64-n,wi=(t,e,n)=>t<<n-32|e>>>64-n;function dt(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:o|0}}const Qe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),tn=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,xi=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),vi=(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,Ei=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),Bi=(t,e,n,r,o,s)=>e+n+r+o+s+(t/2**32|0)|0,Gt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function en(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function at(t,...e){if(!en(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nn(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");mt(t.outputLen),mt(t.blockLen)}function Nt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rn(t,e){at(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function fe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ut(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function on(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function gt(t,e){return t<<32-e|t>>>e}const vr=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Er(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const wt=vr?t=>t:t=>Er(t);function Ii(t){for(let e=0;e<t.length;e++)t[e]=Er(t[e]);return t}const Ot=vr?t=>t:Ii,Br=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Ai=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ce(t){if(at(t),Br)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Ai[t[n]];return e}const xt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ir(t){if(t>=xt._0&&t<=xt._9)return t-xt._0;if(t>=xt.A&&t<=xt.F)return t-(xt.A-10);if(t>=xt.a&&t<=xt.f)return t-(xt.a-10)}function sn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Br)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,s=0;o<n;o++,s+=2){const i=Ir(t.charCodeAt(s)),f=Ir(t.charCodeAt(s+1));if(i===void 0||f===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[o]=i*16+f}return r}function Si(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ht(t){return typeof t=="string"&&(t=Si(t)),at(t),t}function Ht(...t){let e=0;for(let r=0;r<t.length;r++){const o=t[r];at(o),e+=o.length}const n=new Uint8Array(e);for(let r=0,o=0;r<t.length;r++){const s=t[r];n.set(s,o),o+=s.length}return n}class Ie{}function ae(t){const e=r=>t().update(ht(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ni(t){const e=(r,o)=>t(o).update(ht(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Zt(t=32){if(Gt&&typeof Gt.getRandomValues=="function")return Gt.getRandomValues(new Uint8Array(t));if(Gt&&typeof Gt.randomBytes=="function")return Uint8Array.from(Gt.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Oi=BigInt(0),ue=BigInt(1),Ui=BigInt(2),_i=BigInt(7),Ti=BigInt(256),Ri=BigInt(113),Ar=[],Sr=[],Nr=[];for(let t=0,e=ue,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Ar.push(2*(5*r+n)),Sr.push((t+1)*(t+2)/2%64);let o=Oi;for(let s=0;s<7;s++)e=(e<<ue^(e>>_i)*Ri)%Ti,e&Ui&&(o^=ue<<(ue<<BigInt(s))-ue);Nr.push(o)}const Or=mr(Nr,!0),$i=Or[0],Ci=Or[1],Ur=(t,e,n)=>n>32?mi(t,e,n):bi(t,e,n),_r=(t,e,n)=>n>32?wi(t,e,n):yi(t,e,n);function Li(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let i=0;i<10;i++)n[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){const f=(i+8)%10,c=(i+2)%10,u=n[c],a=n[c+1],l=Ur(u,a,1)^n[f],h=_r(u,a,1)^n[f+1];for(let g=0;g<50;g+=10)t[i+g]^=l,t[i+g+1]^=h}let o=t[2],s=t[3];for(let i=0;i<24;i++){const f=Sr[i],c=Ur(o,s,f),u=_r(o,s,f),a=Ar[i];o=t[a],s=t[a+1],t[a]=c,t[a+1]=u}for(let i=0;i<50;i+=10){for(let f=0;f<10;f++)n[f]=t[i+f];for(let f=0;f<10;f++)t[i+f]^=~n[(f+2)%10]&n[(f+4)%10]}t[0]^=$i[r],t[1]^=Ci[r]}ut(n)}class Vn extends Ie{constructor(e,n,r,o=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=o,this.rounds=s,mt(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=fe(this.state)}clone(){return this._cloneInto()}keccak(){Ot(this.state32),Li(this.state32,this.rounds),Ot(this.state32),this.posOut=0,this.pos=0}update(e){Nt(this),e=ht(e),at(e);const{blockLen:n,state:r}=this,o=e.length;for(let s=0;s<o;){const i=Math.min(n-this.pos,o-s);for(let f=0;f<i;f++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:o}=this;e[r]^=n,(n&128)!==0&&r===o-1&&this.keccak(),e[o-1]^=128,this.keccak()}writeInto(e){Nt(this,!1),at(e),this.finish();const n=this.state,{blockLen:r}=this;for(let o=0,s=e.length;o<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-o);e.set(n.subarray(this.posOut,this.posOut+i),o),this.posOut+=i,o+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rn(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ut(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:o,rounds:s,enableXOF:i}=this;return e||(e=new Vn(n,r,o,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=o,e.enableXOF=i,e.destroyed=this.destroyed,e}}const ji=(t,e,n)=>ae(()=>new Vn(e,t,n)),ki=ji(1,136,256/8);function Pi(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),f=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,i,r),t.setUint32(e+u,f,r)}function Hi(t,e,n){return t&e^~t&n}function Di(t,e,n){return t&e^t&n^e&n}class Tr extends Ie{constructor(e,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(e),this.view=on(this.buffer)}update(e){Nt(this),e=ht(e),at(e);const{view:n,buffer:r,blockLen:o}=this,s=e.length;for(let i=0;i<s;){const f=Math.min(o-this.pos,s-i);if(f===o){const c=on(e);for(;o<=s-i;i+=o)this.process(c,i);continue}r.set(e.subarray(i,i+f),this.pos),this.pos+=f,i+=f,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nt(this),rn(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,ut(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(r,0),i=0);for(let l=i;l<o;l++)n[l]=0;Pi(r,o-8,BigInt(this.length*8),s),this.process(r,0);const f=on(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,a=this.get();if(u>a.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)f.setUint32(4*l,a[l],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:f}=this;return e.destroyed=i,e.finished=s,e.length=o,e.pos=f,o%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Ut=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),W=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Y=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Mi=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_t=new Uint32Array(64);class Vi extends Tr{constructor(e=32){super(64,e,8,!1),this.A=Ut[0]|0,this.B=Ut[1]|0,this.C=Ut[2]|0,this.D=Ut[3]|0,this.E=Ut[4]|0,this.F=Ut[5]|0,this.G=Ut[6]|0,this.H=Ut[7]|0}get(){const{A:e,B:n,C:r,D:o,E:s,F:i,G:f,H:c}=this;return[e,n,r,o,s,i,f,c]}set(e,n,r,o,s,i,f,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=f|0,this.H=c|0}process(e,n){for(let l=0;l<16;l++,n+=4)_t[l]=e.getUint32(n,!1);for(let l=16;l<64;l++){const h=_t[l-15],g=_t[l-2],m=gt(h,7)^gt(h,18)^h>>>3,b=gt(g,17)^gt(g,19)^g>>>10;_t[l]=b+_t[l-7]+m+_t[l-16]|0}let{A:r,B:o,C:s,D:i,E:f,F:c,G:u,H:a}=this;for(let l=0;l<64;l++){const h=gt(f,6)^gt(f,11)^gt(f,25),g=a+h+Hi(f,c,u)+Mi[l]+_t[l]|0,b=(gt(r,2)^gt(r,13)^gt(r,22))+Di(r,o,s)|0;a=u,u=c,c=f,f=i+g|0,i=s,s=o,o=r,r=g+b|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,f=f+this.E|0,c=c+this.F|0,u=u+this.G|0,a=a+this.H|0,this.set(r,o,s,i,f,c,u,a)}roundClean(){ut(_t)}destroy(){this.set(0,0,0,0,0,0,0,0),ut(this.buffer)}}const Rr=mr(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),qi=Rr[0],Ki=Rr[1],Tt=new Uint32Array(80),Rt=new Uint32Array(80);class fn extends Tr{constructor(e=64){super(128,e,16,!1),this.Ah=Y[0]|0,this.Al=Y[1]|0,this.Bh=Y[2]|0,this.Bl=Y[3]|0,this.Ch=Y[4]|0,this.Cl=Y[5]|0,this.Dh=Y[6]|0,this.Dl=Y[7]|0,this.Eh=Y[8]|0,this.El=Y[9]|0,this.Fh=Y[10]|0,this.Fl=Y[11]|0,this.Gh=Y[12]|0,this.Gl=Y[13]|0,this.Hh=Y[14]|0,this.Hl=Y[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:o,Ch:s,Cl:i,Dh:f,Dl:c,Eh:u,El:a,Fh:l,Fl:h,Gh:g,Gl:m,Hh:b,Hl:v}=this;return[e,n,r,o,s,i,f,c,u,a,l,h,g,m,b,v]}set(e,n,r,o,s,i,f,c,u,a,l,h,g,m,b,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=f|0,this.Dl=c|0,this.Eh=u|0,this.El=a|0,this.Fh=l|0,this.Fl=h|0,this.Gh=g|0,this.Gl=m|0,this.Hh=b|0,this.Hl=v|0}process(e,n){for(let C=0;C<16;C++,n+=4)Tt[C]=e.getUint32(n),Rt[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const H=Tt[C-15]|0,_=Rt[C-15]|0,k=At(H,_,1)^At(H,_,8)^wr(H,_,7),P=St(H,_,1)^St(H,_,8)^xr(H,_,7),R=Tt[C-2]|0,d=Rt[C-2]|0,w=At(R,d,19)^se(R,d,61)^wr(R,d,6),p=St(R,d,19)^ie(R,d,61)^xr(R,d,6),y=xi(P,p,Rt[C-7],Rt[C-16]),x=vi(y,k,w,Tt[C-7],Tt[C-16]);Tt[C]=x|0,Rt[C]=y|0}let{Ah:r,Al:o,Bh:s,Bl:i,Ch:f,Cl:c,Dh:u,Dl:a,Eh:l,El:h,Fh:g,Fl:m,Gh:b,Gl:v,Hh:L,Hl:V}=this;for(let C=0;C<80;C++){const H=At(l,h,14)^At(l,h,18)^se(l,h,41),_=St(l,h,14)^St(l,h,18)^ie(l,h,41),k=l&g^~l&b,P=h&m^~h&v,R=Ei(V,_,P,Ki[C],Rt[C]),d=Bi(R,L,H,k,qi[C],Tt[C]),w=R|0,p=At(r,o,28)^se(r,o,34)^se(r,o,39),y=St(r,o,28)^ie(r,o,34)^ie(r,o,39),x=r&s^r&f^s&f,B=o&i^o&c^i&c;L=b|0,V=v|0,b=g|0,v=m|0,g=l|0,m=h|0,{h:l,l:h}=dt(u|0,a|0,d|0,w|0),u=f|0,a=c|0,f=s|0,c=i|0,s=r|0,i=o|0;const E=Qe(w,y,B);r=tn(E,d,p,x),o=E|0}({h:r,l:o}=dt(this.Ah|0,this.Al|0,r|0,o|0)),{h:s,l:i}=dt(this.Bh|0,this.Bl|0,s|0,i|0),{h:f,l:c}=dt(this.Ch|0,this.Cl|0,f|0,c|0),{h:u,l:a}=dt(this.Dh|0,this.Dl|0,u|0,a|0),{h:l,l:h}=dt(this.Eh|0,this.El|0,l|0,h|0),{h:g,l:m}=dt(this.Fh|0,this.Fl|0,g|0,m|0),{h:b,l:v}=dt(this.Gh|0,this.Gl|0,b|0,v|0),{h:L,l:V}=dt(this.Hh|0,this.Hl|0,L|0,V|0),this.set(r,o,s,i,f,c,u,a,l,h,g,m,b,v,L,V)}roundClean(){ut(Tt,Rt)}destroy(){ut(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Fi extends fn{constructor(){super(48),this.Ah=W[0]|0,this.Al=W[1]|0,this.Bh=W[2]|0,this.Bl=W[3]|0,this.Ch=W[4]|0,this.Cl=W[5]|0,this.Dh=W[6]|0,this.Dl=W[7]|0,this.Eh=W[8]|0,this.El=W[9]|0,this.Fh=W[10]|0,this.Fl=W[11]|0,this.Gh=W[12]|0,this.Gl=W[13]|0,this.Hh=W[14]|0,this.Hl=W[15]|0}}const X=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class zi extends fn{constructor(){super(32),this.Ah=X[0]|0,this.Al=X[1]|0,this.Bh=X[2]|0,this.Bl=X[3]|0,this.Ch=X[4]|0,this.Cl=X[5]|0,this.Dh=X[6]|0,this.Dl=X[7]|0,this.Eh=X[8]|0,this.El=X[9]|0,this.Fh=X[10]|0,this.Fl=X[11]|0,this.Gh=X[12]|0,this.Gl=X[13]|0,this.Hh=X[14]|0,this.Hl=X[15]|0}}const Ae=ae(()=>new Vi),Gi=ae(()=>new fn),Zi=ae(()=>new Fi),Wi=ae(()=>new zi),Yi=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),F=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),N=new Uint32Array(32);function $t(t,e,n,r,o,s){const i=o[s],f=o[s+1];let c=N[2*t],u=N[2*t+1],a=N[2*e],l=N[2*e+1],h=N[2*n],g=N[2*n+1],m=N[2*r],b=N[2*r+1],v=Qe(c,a,i);u=tn(v,u,l,f),c=v|0,{Dh:b,Dl:m}={Dh:b^u,Dl:m^c},{Dh:b,Dl:m}={Dh:pi(b,m),Dl:gi(b)},{h:g,l:h}=dt(g,h,b,m),{Bh:l,Bl:a}={Bh:l^g,Bl:a^h},{Bh:l,Bl:a}={Bh:At(l,a,24),Bl:St(l,a,24)},N[2*t]=c,N[2*t+1]=u,N[2*e]=a,N[2*e+1]=l,N[2*n]=h,N[2*n+1]=g,N[2*r]=m,N[2*r+1]=b}function Ct(t,e,n,r,o,s){const i=o[s],f=o[s+1];let c=N[2*t],u=N[2*t+1],a=N[2*e],l=N[2*e+1],h=N[2*n],g=N[2*n+1],m=N[2*r],b=N[2*r+1],v=Qe(c,a,i);u=tn(v,u,l,f),c=v|0,{Dh:b,Dl:m}={Dh:b^u,Dl:m^c},{Dh:b,Dl:m}={Dh:At(b,m,16),Dl:St(b,m,16)},{h:g,l:h}=dt(g,h,b,m),{Bh:l,Bl:a}={Bh:l^g,Bl:a^h},{Bh:l,Bl:a}={Bh:se(l,a,63),Bl:ie(l,a,63)},N[2*t]=c,N[2*t+1]=u,N[2*e]=a,N[2*e+1]=l,N[2*n]=h,N[2*n+1]=g,N[2*r]=m,N[2*r+1]=b}function Xi(t,e={},n,r,o){if(mt(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:i,personalization:f}=e;if(s!==void 0&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(i!==void 0&&i.length!==r)throw new Error("salt must be undefined or "+r);if(f!==void 0&&f.length!==o)throw new Error("personalization must be undefined or "+o)}class Ji extends Ie{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,mt(e),mt(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=fe(this.buffer)}update(e){Nt(this),e=ht(e),at(e);const{blockLen:n,buffer:r,buffer32:o}=this,s=e.length,i=e.byteOffset,f=e.buffer;for(let c=0;c<s;){this.pos===n&&(Ot(o),this.compress(o,0,!1),Ot(o),this.pos=0);const u=Math.min(n-this.pos,s-c),a=i+c;if(u===n&&!(a%4)&&c+u<s){const l=new Uint32Array(f,a,Math.floor((s-c)/4));Ot(l);for(let h=0;c+n<s;h+=o.length,c+=n)this.length+=n,this.compress(l,h,!1);Ot(l);continue}r.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){Nt(this),rn(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ut(this.buffer.subarray(n)),Ot(r),this.compress(r,0,!0),Ot(r);const o=fe(e);this.get().forEach((s,i)=>o[i]=wt(s))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:o,destroyed:s,outputLen:i,pos:f}=this;return e||(e=new this.constructor({dkLen:i})),e.set(...this.get()),e.buffer.set(n),e.destroyed=s,e.finished=o,e.length=r,e.pos=f,e.outputLen=i,e}clone(){return this._cloneInto()}}class Qi extends Ji{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=F[0]|0,this.v0h=F[1]|0,this.v1l=F[2]|0,this.v1h=F[3]|0,this.v2l=F[4]|0,this.v2h=F[5]|0,this.v3l=F[6]|0,this.v3h=F[7]|0,this.v4l=F[8]|0,this.v4h=F[9]|0,this.v5l=F[10]|0,this.v5h=F[11]|0,this.v6l=F[12]|0,this.v6h=F[13]|0,this.v7l=F[14]|0,this.v7h=F[15]|0,Xi(n,e,64,16,16);let{key:r,personalization:o,salt:s}=e,i=0;if(r!==void 0&&(r=ht(r),i=r.length),this.v0l^=this.outputLen|i<<8|65536|1<<24,s!==void 0){s=ht(s);const f=fe(s);this.v4l^=wt(f[0]),this.v4h^=wt(f[1]),this.v5l^=wt(f[2]),this.v5h^=wt(f[3])}if(o!==void 0){o=ht(o);const f=fe(o);this.v6l^=wt(f[0]),this.v6h^=wt(f[1]),this.v7l^=wt(f[2]),this.v7h^=wt(f[3])}if(r!==void 0){const f=new Uint8Array(this.blockLen);f.set(r),this.update(f)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:o,v2l:s,v2h:i,v3l:f,v3h:c,v4l:u,v4h:a,v5l:l,v5h:h,v6l:g,v6h:m,v7l:b,v7h:v}=this;return[e,n,r,o,s,i,f,c,u,a,l,h,g,m,b,v]}set(e,n,r,o,s,i,f,c,u,a,l,h,g,m,b,v){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=o|0,this.v2l=s|0,this.v2h=i|0,this.v3l=f|0,this.v3h=c|0,this.v4l=u|0,this.v4h=a|0,this.v5l=l|0,this.v5h=h|0,this.v6l=g|0,this.v6h=m|0,this.v7l=b|0,this.v7h=v|0}compress(e,n,r){this.get().forEach((c,u)=>N[u]=c),N.set(F,16);let{h:o,l:s}=yr(BigInt(this.length));N[24]=F[8]^s,N[25]=F[9]^o,r&&(N[28]=~N[28],N[29]=~N[29]);let i=0;const f=Yi;for(let c=0;c<12;c++)$t(0,4,8,12,e,n+2*f[i++]),Ct(0,4,8,12,e,n+2*f[i++]),$t(1,5,9,13,e,n+2*f[i++]),Ct(1,5,9,13,e,n+2*f[i++]),$t(2,6,10,14,e,n+2*f[i++]),Ct(2,6,10,14,e,n+2*f[i++]),$t(3,7,11,15,e,n+2*f[i++]),Ct(3,7,11,15,e,n+2*f[i++]),$t(0,5,10,15,e,n+2*f[i++]),Ct(0,5,10,15,e,n+2*f[i++]),$t(1,6,11,12,e,n+2*f[i++]),Ct(1,6,11,12,e,n+2*f[i++]),$t(2,7,8,13,e,n+2*f[i++]),Ct(2,7,8,13,e,n+2*f[i++]),$t(3,4,9,14,e,n+2*f[i++]),Ct(3,4,9,14,e,n+2*f[i++]);this.v0l^=N[0]^N[16],this.v0h^=N[1]^N[17],this.v1l^=N[2]^N[18],this.v1h^=N[3]^N[19],this.v2l^=N[4]^N[20],this.v2h^=N[5]^N[21],this.v3l^=N[6]^N[22],this.v3h^=N[7]^N[23],this.v4l^=N[8]^N[24],this.v4h^=N[9]^N[25],this.v5l^=N[10]^N[26],this.v5h^=N[11]^N[27],this.v6l^=N[12]^N[28],this.v6h^=N[13]^N[29],this.v7l^=N[14]^N[30],this.v7h^=N[15]^N[31],ut(N)}destroy(){this.destroyed=!0,ut(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const tf=Ni(t=>new Qi(t)),ef="https://rpc.walletconnect.org/v1";function cn(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(ki(n)).toString("hex")}async function $r(t,e,n,r,o,s){switch(n.t){case"eip191":return await Cr(t,e,n.s);case"eip1271":return await Lr(t,e,n.s,r,o,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Cr(t,e,n){return(await xs({hash:cn(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Lr(t,e,n,r,o,s){const i=Fe(r);if(!i.namespace||!i.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const f="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=n.substring(2),a=(u.length/2).toString(16).padStart(64,"0"),l=(e.startsWith("0x")?e:cn(e)).substring(2),h=f+l+c+a+u,g=await fetch(`${s||ef}/?chainId=${r}&projectId=${o}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:nf(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:m}=await g.json();return m?m.slice(0,f.length).toLowerCase()===f.toLowerCase():!1}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function nf(){return Date.now()+Math.floor(Math.random()*1e3)}function rf(t){const e=atob(t),n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);const r=n[0];if(r===0)throw new Error("No signatures found");const o=1+r*64;if(n.length<o)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return re.encode(s)}function of(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const o=tf(r,{dkLen:32});return re.encode(o)}function sf(t){const e=new Uint8Array(Ae(jr(t)));return re.encode(e)}function jr(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function ff(t){const e=Buffer.from(t,"base64"),n=vs(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=Es(n),o=Buffer.from("TX"),s=Buffer.concat([o,Buffer.from(r)]),i=Wi(s);return Bs.encode(i).replace(/=+$/,"")}function an(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function cf(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),o=[];o.push(Buffer.from([10])),o.push(an(e.length)),o.push(e),o.push(Buffer.from([18])),o.push(an(n.length)),o.push(n),o.push(Buffer.from([26])),o.push(an(r.length)),o.push(r);const s=Buffer.concat(o),i=Ae(s);return Buffer.from(i).toString("hex").toUpperCase()}var af=Object.defineProperty,uf=Object.defineProperties,lf=Object.getOwnPropertyDescriptors,kr=Object.getOwnPropertySymbols,df=Object.prototype.hasOwnProperty,hf=Object.prototype.propertyIsEnumerable,Pr=(t,e,n)=>e in t?af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,un=(t,e)=>{for(var n in e||(e={}))df.call(e,n)&&Pr(t,n,e[n]);if(kr)for(var n of kr(e))hf.call(e,n)&&Pr(t,n,e[n]);return t},Hr=(t,e)=>uf(t,lf(e));const pf="did:pkh:",Se=t=>t?.split(":"),Dr=t=>{const e=t&&Se(t);if(e)return t.includes(pf)?e[3]:e[1]},Mr=t=>{const e=t&&Se(t);if(e)return e[2]+":"+e[3]},ln=t=>{const e=t&&Se(t);if(e)return e.pop()};async function gf(t){const{cacao:e,projectId:n}=t,{s:r,p:o}=e,s=Vr(o,o.iss),i=ln(o.iss);return await $r(i,s,r,Mr(o.iss),n)}const Vr=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=ln(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let o=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,i=`Version: ${t.version}`,f=`Chain ID: ${Dr(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,a=t.exp?`Expiration Time: ${t.exp}`:void 0,l=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,g=t.resources?`Resources:${t.resources.map(b=>`
- ${b}`).join("")}`:void 0,m=Oe(t.resources);if(m){const b=Lt(m);o=pn(o,b)}return[n,r,"",o,"",s,i,f,c,u,a,l,h,g].filter(b=>b!=null).join(`
`)};function bf(t,e,n){return n.includes("did:pkh:")||(n=`did:pkh:${n}`),{h:{t:"caip122"},p:{iss:n,domain:t.domain,aud:t.aud,version:t.version,nonce:t.nonce,iat:t.iat,statement:t.statement,requestId:t.requestId,resources:t.resources,nbf:t.nbf,exp:t.exp},s:e}}function yf(t){var e;const{authPayload:n,chains:r,methods:o}=t,s=n.statement||"";if(!(r!=null&&r.length))return n;const i=n.chains,f=Xe(i,r);if(!(f!=null&&f.length))throw new Error("No supported chains");const c=qr(n.resources);if(!c)return n;bt(c);const u=Kr(c,"eip155");let a=n?.resources||[];if(u!=null&&u.length){const l=Fr(u),h=Xe(l,o);if(!(h!=null&&h.length))throw new Error(`Supported methods don't satisfy the requested: ${JSON.stringify(l)}, supported: ${JSON.stringify(o)}`);const g=dn("request",h,{chains:f}),m=Wr(c,"eip155",g);a=((e=n?.resources)==null?void 0:e.slice(0,-1))||[],a.push(Ne(m))}return Hr(un({},n),{statement:Xr(s,Oe(a)),chains:f,resources:n!=null&&n.resources||a.length>0?a:void 0})}function qr(t){const e=Oe(t);if(e&&hn(e))return Lt(e)}function mf(t,e){var n;return(n=t?.att)==null?void 0:n.hasOwnProperty(e)}function Kr(t,e){var n,r;return(n=t?.att)!=null&&n[e]?Object.keys((r=t?.att)==null?void 0:r[e]):[]}function wf(t){return t?.map(e=>Object.keys(e))||[]}function Fr(t){return t?.map(e=>{var n;return(n=e.split("/"))==null?void 0:n[1]})||[]}function zr(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Gr(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function bt(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(o=>{const s=r[o];if(!Array.isArray(s))throw new Error(`Ability limits ${o} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${o} is empty array, must be an array with objects`);s.forEach(i=>{if(typeof i!="object")throw new Error(`Ability limits (${o}) must be an array of objects, found: ${i}`)})})})}function Zr(t,e,n,r={}){return n?.sort((o,s)=>o.localeCompare(s)),{att:{[t]:dn(e,n,r)}}}function Wr(t,e,n){var r;t.att[e]=un({},n);const o=(r=Object.keys(t.att))==null?void 0:r.sort((i,f)=>i.localeCompare(f)),s={att:{}};return o.reduce((i,f)=>(i.att[f]=t.att[f],i),s)}function dn(t,e,n={}){e=e?.sort((o,s)=>o.localeCompare(s));const r=e.map(o=>({[`${t}/${o}`]:[n]}));return Object.assign({},...r)}function Ne(t){return bt(t),`urn:recap:${zr(t).replace(/=/g,"")}`}function Lt(t){const e=Gr(t.replace("urn:recap:",""));return bt(e),e}function xf(t,e,n){const r=Zr(t,e,n);return Ne(r)}function hn(t){return t&&t.includes("urn:recap:")}function vf(t,e){const n=Lt(t),r=Lt(e),o=Yr(n,r);return Ne(o)}function Yr(t,e){bt(t),bt(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((o,s)=>o.localeCompare(s)),r={att:{}};return n.forEach(o=>{var s,i;Object.keys(((s=t.att)==null?void 0:s[o])||{}).concat(Object.keys(((i=e.att)==null?void 0:i[o])||{})).sort((f,c)=>f.localeCompare(c)).forEach(f=>{var c,u;r.att[o]=Hr(un({},r.att[o]),{[f]:((c=t.att[o])==null?void 0:c[f])||((u=e.att[o])==null?void 0:u[f])})})}),r}function pn(t="",e){bt(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let o=0;Object.keys(e.att).forEach(f=>{const c=Object.keys(e.att[f]).map(l=>({ability:l.split("/")[0],action:l.split("/")[1]}));c.sort((l,h)=>l.action.localeCompare(h.action));const u={};c.forEach(l=>{u[l.ability]||(u[l.ability]=[]),u[l.ability].push(l.action)});const a=Object.keys(u).map(l=>(o++,`(${o}) '${l}': '${u[l].join("', '")}' for '${f}'.`));r.push(a.join(", ").replace(".,","."))});const s=r.join(" "),i=`${n}${s}`;return`${t?t+" ":""}${i}`}function Ef(t){var e;const n=Lt(t);bt(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(o=>o.split("/")[1]):[]}function Bf(t){const e=Lt(t);bt(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(o=>{var s;(s=o?.[0])!=null&&s.chains&&n.push(o[0].chains)})}),[...new Set(n.flat())]}function Xr(t,e){if(!e)return t;const n=Lt(e);return bt(n),pn(t,n)}function Oe(t){if(!t)return;const e=t?.[t.length-1];return hn(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Jr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gn(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function bn(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nt(t,...e){if(!Jr(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Qr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function If(t,e){nt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function jt(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Wt(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Af(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Sf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Nf(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function yn(t){if(typeof t=="string")t=Nf(t);else if(Jr(t))t=mn(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Of(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Uf(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const _f=(t,e)=>{function n(r,...o){if(nt(r),!Sf)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const a=o[0];if(!a)throw new Error("nonce / iv required");t.varSizeNonce?nt(a):nt(a,t.nonceLength)}const s=t.tagLength;s&&o[1]!==void 0&&nt(o[1]);const i=e(r,...o),f=(a,l)=>{if(l!==void 0){if(a!==2)throw new Error("cipher output not supported");nt(l)}};let c=!1;return{encrypt(a,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,nt(a),f(i.encrypt.length,l),i.encrypt(a,l)},decrypt(a,l){if(nt(a),s&&a.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return f(i.decrypt.length,l),i.decrypt(a,l)}}}return Object.assign(n,t),n};function to(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Rf(e))throw new Error("invalid output, must be aligned");return e}function eo(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),f=Number(n&s),c=r?4:0,u=r?0:4;t.setUint32(e+c,i,r),t.setUint32(e+u,f,r)}function Tf(t,e,n){gn(n);const r=new Uint8Array(16),o=Af(r);return eo(o,0,BigInt(e),n),eo(o,8,BigInt(t),n),r}function Rf(t){return t.byteOffset%4===0}function mn(t){return Uint8Array.from(t)}const no=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),$f=no("expand 16-byte k"),Cf=no("expand 32-byte k"),Lf=jt($f),jf=jt(Cf);function M(t,e){return t<<e|t>>>32-e}function wn(t){return t.byteOffset%4===0}const Ue=64,kf=16,ro=2**32-1,oo=new Uint32Array;function Pf(t,e,n,r,o,s,i,f){const c=o.length,u=new Uint8Array(Ue),a=jt(u),l=wn(o)&&wn(s),h=l?jt(o):oo,g=l?jt(s):oo;for(let m=0;m<c;i++){if(t(e,n,r,a,i,f),i>=ro)throw new Error("arx: counter overflow");const b=Math.min(Ue,c-m);if(l&&b===Ue){const v=m/4;if(m%4!==0)throw new Error("arx: invalid block position");for(let L=0,V;L<kf;L++)V=v+L,g[V]=h[V]^a[L];m+=Ue;continue}for(let v=0,L;v<b;v++)L=m+v,s[L]=o[L]^u[v];m+=b}}function Hf(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:s,rounds:i}=Of({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return bn(o),bn(i),gn(s),gn(n),(f,c,u,a,l=0)=>{nt(f),nt(c),nt(u);const h=u.length;if(a===void 0&&(a=new Uint8Array(h)),nt(a),bn(l),l<0||l>=ro)throw new Error("arx: counter overflow");if(a.length<h)throw new Error(`arx: output (${a.length}) is shorter than data (${h})`);const g=[];let m=f.length,b,v;if(m===32)g.push(b=mn(f)),v=jf;else if(m===16&&n)b=new Uint8Array(32),b.set(f),b.set(f,16),v=Lf,g.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${m}`);wn(c)||g.push(c=mn(c));const L=jt(b);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,L,jt(c.subarray(0,16)),L),c=c.subarray(16)}const V=16-o;if(V!==c.length)throw new Error(`arx: nonce must be ${V} or 16 bytes`);if(V!==12){const H=new Uint8Array(12);H.set(c,s?0:12-c.length),c=H,g.push(c)}const C=jt(c);return Pf(t,v,L,C,u,a,l,i),Wt(...g),a}}const G=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Df{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=yn(e),nt(e,32);const n=G(e,0),r=G(e,2),o=G(e,4),s=G(e,6),i=G(e,8),f=G(e,10),c=G(e,12),u=G(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|o<<6)&7939,this.r[3]=(o>>>7|s<<9)&8191,this.r[4]=(s>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|f<<2)&8191,this.r[7]=(f>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let a=0;a<8;a++)this.pad[a]=G(e,16+2*a)}process(e,n,r=!1){const o=r?0:2048,{h:s,r:i}=this,f=i[0],c=i[1],u=i[2],a=i[3],l=i[4],h=i[5],g=i[6],m=i[7],b=i[8],v=i[9],L=G(e,n+0),V=G(e,n+2),C=G(e,n+4),H=G(e,n+6),_=G(e,n+8),k=G(e,n+10),P=G(e,n+12),R=G(e,n+14);let d=s[0]+(L&8191),w=s[1]+((L>>>13|V<<3)&8191),p=s[2]+((V>>>10|C<<6)&8191),y=s[3]+((C>>>7|H<<9)&8191),x=s[4]+((H>>>4|_<<12)&8191),B=s[5]+(_>>>1&8191),E=s[6]+((_>>>14|k<<2)&8191),I=s[7]+((k>>>11|P<<5)&8191),S=s[8]+((P>>>8|R<<8)&8191),O=s[9]+(R>>>5|o),A=0,T=A+d*f+w*(5*v)+p*(5*b)+y*(5*m)+x*(5*g);A=T>>>13,T&=8191,T+=B*(5*h)+E*(5*l)+I*(5*a)+S*(5*u)+O*(5*c),A+=T>>>13,T&=8191;let U=A+d*c+w*f+p*(5*v)+y*(5*b)+x*(5*m);A=U>>>13,U&=8191,U+=B*(5*g)+E*(5*h)+I*(5*l)+S*(5*a)+O*(5*u),A+=U>>>13,U&=8191;let $=A+d*u+w*c+p*f+y*(5*v)+x*(5*b);A=$>>>13,$&=8191,$+=B*(5*m)+E*(5*g)+I*(5*h)+S*(5*l)+O*(5*a),A+=$>>>13,$&=8191;let D=A+d*a+w*u+p*c+y*f+x*(5*v);A=D>>>13,D&=8191,D+=B*(5*b)+E*(5*m)+I*(5*g)+S*(5*h)+O*(5*l),A+=D>>>13,D&=8191;let q=A+d*l+w*a+p*u+y*c+x*f;A=q>>>13,q&=8191,q+=B*(5*v)+E*(5*b)+I*(5*m)+S*(5*g)+O*(5*h),A+=q>>>13,q&=8191;let j=A+d*h+w*l+p*a+y*u+x*c;A=j>>>13,j&=8191,j+=B*f+E*(5*v)+I*(5*b)+S*(5*m)+O*(5*g),A+=j>>>13,j&=8191;let K=A+d*g+w*h+p*l+y*a+x*u;A=K>>>13,K&=8191,K+=B*c+E*f+I*(5*v)+S*(5*b)+O*(5*m),A+=K>>>13,K&=8191;let et=A+d*m+w*g+p*h+y*l+x*a;A=et>>>13,et&=8191,et+=B*u+E*c+I*f+S*(5*v)+O*(5*b),A+=et>>>13,et&=8191;let Z=A+d*b+w*m+p*g+y*h+x*l;A=Z>>>13,Z&=8191,Z+=B*a+E*u+I*c+S*f+O*(5*v),A+=Z>>>13,Z&=8191;let z=A+d*v+w*b+p*m+y*g+x*h;A=z>>>13,z&=8191,z+=B*l+E*a+I*u+S*c+O*f,A+=z>>>13,z&=8191,A=(A<<2)+A|0,A=A+T|0,T=A&8191,A=A>>>13,U+=A,s[0]=T,s[1]=U,s[2]=$,s[3]=D,s[4]=q,s[5]=j,s[6]=K,s[7]=et,s[8]=Z,s[9]=z}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let o=e[1]>>>13;e[1]&=8191;for(let f=2;f<10;f++)e[f]+=o,o=e[f]>>>13,e[f]&=8191;e[0]+=o*5,o=e[0]>>>13,e[0]&=8191,e[1]+=o,o=e[1]>>>13,e[1]&=8191,e[2]+=o,r[0]=e[0]+5,o=r[0]>>>13,r[0]&=8191;for(let f=1;f<10;f++)r[f]=e[f]+o,o=r[f]>>>13,r[f]&=8191;r[9]-=8192;let s=(o^1)-1;for(let f=0;f<10;f++)r[f]&=s;s=~s;for(let f=0;f<10;f++)e[f]=e[f]&s|r[f];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let i=e[0]+n[0];e[0]=i&65535;for(let f=1;f<8;f++)i=(e[f]+n[f]|0)+(i>>>16)|0,e[f]=i&65535;Wt(r)}update(e){Qr(this),e=yn(e),nt(e);const{buffer:n,blockLen:r}=this,o=e.length;for(let s=0;s<o;){const i=Math.min(r-this.pos,o-s);if(i===r){for(;r<=o-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+i),this.pos),this.pos+=i,s+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Wt(this.h,this.r,this.buffer,this.pad)}digestInto(e){Qr(this),If(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:o}=this;if(o){for(n[o++]=1;o<16;o++)n[o]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let i=0;i<8;i++)e[s++]=r[i]>>>0,e[s++]=r[i]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Mf(t){const e=(r,o)=>t(o).update(yn(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Vf=Mf(t=>new Df(t));function qf(t,e,n,r,o,s=20){let i=t[0],f=t[1],c=t[2],u=t[3],a=e[0],l=e[1],h=e[2],g=e[3],m=e[4],b=e[5],v=e[6],L=e[7],V=o,C=n[0],H=n[1],_=n[2],k=i,P=f,R=c,d=u,w=a,p=l,y=h,x=g,B=m,E=b,I=v,S=L,O=V,A=C,T=H,U=_;for(let D=0;D<s;D+=2)k=k+w|0,O=M(O^k,16),B=B+O|0,w=M(w^B,12),k=k+w|0,O=M(O^k,8),B=B+O|0,w=M(w^B,7),P=P+p|0,A=M(A^P,16),E=E+A|0,p=M(p^E,12),P=P+p|0,A=M(A^P,8),E=E+A|0,p=M(p^E,7),R=R+y|0,T=M(T^R,16),I=I+T|0,y=M(y^I,12),R=R+y|0,T=M(T^R,8),I=I+T|0,y=M(y^I,7),d=d+x|0,U=M(U^d,16),S=S+U|0,x=M(x^S,12),d=d+x|0,U=M(U^d,8),S=S+U|0,x=M(x^S,7),k=k+p|0,U=M(U^k,16),I=I+U|0,p=M(p^I,12),k=k+p|0,U=M(U^k,8),I=I+U|0,p=M(p^I,7),P=P+y|0,O=M(O^P,16),S=S+O|0,y=M(y^S,12),P=P+y|0,O=M(O^P,8),S=S+O|0,y=M(y^S,7),R=R+x|0,A=M(A^R,16),B=B+A|0,x=M(x^B,12),R=R+x|0,A=M(A^R,8),B=B+A|0,x=M(x^B,7),d=d+w|0,T=M(T^d,16),E=E+T|0,w=M(w^E,12),d=d+w|0,T=M(T^d,8),E=E+T|0,w=M(w^E,7);let $=0;r[$++]=i+k|0,r[$++]=f+P|0,r[$++]=c+R|0,r[$++]=u+d|0,r[$++]=a+w|0,r[$++]=l+p|0,r[$++]=h+y|0,r[$++]=g+x|0,r[$++]=m+B|0,r[$++]=b+E|0,r[$++]=v+I|0,r[$++]=L+S|0,r[$++]=V+O|0,r[$++]=C+A|0,r[$++]=H+T|0,r[$++]=_+U|0}const Kf=Hf(qf,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Ff=new Uint8Array(16),so=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Ff.subarray(n))},zf=new Uint8Array(32);function io(t,e,n,r,o){const s=t(e,n,zf),i=Vf.create(s);o&&so(i,o),so(i,r);const f=Tf(r.length,o?o.length:0,!0);i.update(f);const c=i.digest();return Wt(s,f),c}const Gf=t=>(e,n,r)=>({encrypt(s,i){const f=s.length;i=to(f+16,i,!1),i.set(s);const c=i.subarray(0,-16);t(e,n,c,c,1);const u=io(t,e,n,c,r);return i.set(u,f),Wt(u),i},decrypt(s,i){i=to(s.length-16,i,!1);const f=s.subarray(0,-16),c=s.subarray(-16),u=io(t,e,n,f,r);if(!Uf(c,u))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Wt(u),i}}),fo=_f({blockSize:64,nonceLength:12,tagLength:16},Gf(Kf));class co extends Ie{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,nn(e);const r=ht(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),ut(s)}update(e){return Nt(this),this.iHash.update(e),this}digestInto(e){Nt(this),at(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:f}=this;return e=e,e.finished=o,e.destroyed=s,e.blockLen=i,e.outputLen=f,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const _e=(t,e,n)=>new co(t,e).update(n).digest();_e.create=(t,e)=>new co(t,e);function Zf(t,e,n){return nn(t),n===void 0&&(n=new Uint8Array(t.outputLen)),_e(t,ht(n),ht(e))}const xn=Uint8Array.from([0]),ao=Uint8Array.of();function Wf(t,e,n,r=32){nn(t),mt(r);const o=t.outputLen;if(r>255*o)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/o);n===void 0&&(n=ao);const i=new Uint8Array(s*o),f=_e.create(t,e),c=f._cloneInto(),u=new Uint8Array(f.outputLen);for(let a=0;a<s;a++)xn[0]=a+1,c.update(a===0?ao:u).update(n).update(xn).digestInto(u),i.set(u,o*a),f._cloneInto(c);return f.destroy(),c.destroy(),ut(u,xn),i.slice(0,r)}const Yf=(t,e,n,r,o)=>Wf(t,Zf(t,e,n),r,o),Te=Ae,vn=BigInt(0),En=BigInt(1);function Re(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function $e(t){const e=t.toString(16);return e.length&1?"0"+e:e}function uo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?vn:BigInt("0x"+t)}function Ce(t){return uo(ce(t))}function Le(t){return at(t),uo(ce(Uint8Array.from(t).reverse()))}function Bn(t,e){return sn(t.toString(16).padStart(e*2,"0"))}function In(t,e){return Bn(t,e).reverse()}function rt(t,e,n){let r;if(typeof e=="string")try{r=sn(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(en(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(t+" of length "+n+" expected, got "+o);return r}const An=t=>typeof t=="bigint"&&vn<=t;function Xf(t,e,n){return An(t)&&An(e)&&An(n)&&e<=t&&t<n}function Sn(t,e,n,r){if(!Xf(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Jf(t){let e;for(e=0;t>vn;t>>=En,e+=1);return e}const je=t=>(En<<BigInt(t))-En;function Qf(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=g=>new Uint8Array(g),o=g=>Uint8Array.of(g);let s=r(t),i=r(t),f=0;const c=()=>{s.fill(1),i.fill(0),f=0},u=(...g)=>n(i,s,...g),a=(g=r(0))=>{i=u(o(0),g),s=u(),g.length!==0&&(i=u(o(1),g),s=u())},l=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){s=u();const b=s.slice();m.push(b),g+=s.length}return Ht(...m)};return(g,m)=>{c(),a(g);let b;for(;!(b=m(l()));)a();return c(),b}}function ke(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(o,s,i){const f=t[o];if(i&&f===void 0)return;const c=typeof f;if(c!==s||f===null)throw new Error(`param "${o}" is invalid: expected ${s}, got ${c}`)}Object.entries(e).forEach(([o,s])=>r(o,s,!1)),Object.entries(n).forEach(([o,s])=>r(o,s,!0))}function lo(t){const e=new WeakMap;return(n,...r)=>{const o=e.get(n);if(o!==void 0)return o;const s=t(n,...r);return e.set(n,s),s}}const ot=BigInt(0),Q=BigInt(1),Dt=BigInt(2),tc=BigInt(3),ho=BigInt(4),po=BigInt(5),go=BigInt(8);function lt(t,e){const n=t%e;return n>=ot?n:e+n}function pt(t,e,n){let r=t;for(;e-- >ot;)r*=r,r%=n;return r}function bo(t,e){if(t===ot)throw new Error("invert: expected non-zero number");if(e<=ot)throw new Error("invert: expected positive modulus, got "+e);let n=lt(t,e),r=e,o=ot,s=Q;for(;n!==ot;){const f=r/n,c=r%n,u=o-s*f;r=n,n=c,o=s,s=u}if(r!==Q)throw new Error("invert: does not exist");return lt(o,e)}function yo(t,e){const n=(t.ORDER+Q)/ho,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function ec(t,e){const n=(t.ORDER-po)/go,r=t.mul(e,Dt),o=t.pow(r,n),s=t.mul(e,o),i=t.mul(t.mul(s,Dt),o),f=t.mul(s,t.sub(i,t.ONE));if(!t.eql(t.sqr(f),e))throw new Error("Cannot find square root");return f}function nc(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Q,n=0;for(;e%Dt===ot;)e/=Dt,n++;let r=Dt;const o=Yt(t);for(;wo(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return yo;let s=o.pow(r,e);const i=(e+Q)/Dt;return function(c,u){if(c.is0(u))return u;if(wo(c,u)!==1)throw new Error("Cannot find square root");let a=n,l=c.mul(c.ONE,s),h=c.pow(u,e),g=c.pow(u,i);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let m=1,b=c.sqr(h);for(;!c.eql(b,c.ONE);)if(m++,b=c.sqr(b),m===a)throw new Error("Cannot find square root");const v=Q<<BigInt(a-m-1),L=c.pow(l,v);a=m,l=c.sqr(L),h=c.mul(h,l),g=c.mul(g,L)}return g}}function rc(t){return t%ho===tc?yo:t%go===po?ec:nc(t)}const oc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sc(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=oc.reduce((r,o)=>(r[o]="function",r),e);return ke(t,n),t}function ic(t,e,n){if(n<ot)throw new Error("invalid exponent, negatives unsupported");if(n===ot)return t.ONE;if(n===Q)return e;let r=t.ONE,o=e;for(;n>ot;)n&Q&&(r=t.mul(r,o)),o=t.sqr(o),n>>=Q;return r}function mo(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),o=e.reduce((i,f,c)=>t.is0(f)?i:(r[c]=i,t.mul(i,f)),t.ONE),s=t.inv(o);return e.reduceRight((i,f,c)=>t.is0(f)?i:(r[c]=t.mul(i,r[c]),t.mul(i,f)),s),r}function wo(t,e){const n=(t.ORDER-Q)/Dt,r=t.pow(e,n),o=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),i=t.eql(r,t.neg(t.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function fc(t,e){e!==void 0&&mt(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Yt(t,e,n=!1,r={}){if(t<=ot)throw new Error("invalid field: expected ORDER > 0, got "+t);let o,s;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const a=e;a.BITS&&(o=a.BITS),a.sqrt&&(s=a.sqrt),typeof a.isLE=="boolean"&&(n=a.isLE)}else typeof e=="number"&&(o=e),r.sqrt&&(s=r.sqrt);const{nBitLength:i,nByteLength:f}=fc(t,o);if(f>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:t,isLE:n,BITS:i,BYTES:f,MASK:je(i),ZERO:ot,ONE:Q,create:a=>lt(a,t),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return ot<=a&&a<t},is0:a=>a===ot,isValidNot0:a=>!u.is0(a)&&u.isValid(a),isOdd:a=>(a&Q)===Q,neg:a=>lt(-a,t),eql:(a,l)=>a===l,sqr:a=>lt(a*a,t),add:(a,l)=>lt(a+l,t),sub:(a,l)=>lt(a-l,t),mul:(a,l)=>lt(a*l,t),pow:(a,l)=>ic(u,a,l),div:(a,l)=>lt(a*bo(l,t),t),sqrN:a=>a*a,addN:(a,l)=>a+l,subN:(a,l)=>a-l,mulN:(a,l)=>a*l,inv:a=>bo(a,t),sqrt:s||(a=>(c||(c=rc(t)),c(u,a))),toBytes:a=>n?In(a,f):Bn(a,f),fromBytes:a=>{if(a.length!==f)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+a.length);return n?Le(a):Ce(a)},invertBatch:a=>mo(u,a),cmov:(a,l,h)=>h?l:a});return Object.freeze(u)}function xo(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function vo(t){const e=xo(t);return e+Math.ceil(e/2)}function cc(t,e,n=!1){const r=t.length,o=xo(e),s=vo(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const i=n?Le(t):Ce(t),f=lt(i,e-Q)+Q;return n?In(f,o):Bn(f,o)}const Xt=BigInt(0),Mt=BigInt(1);function le(t,e){const n=e.negate();return t?n:e}function ac(t,e,n){const r=e==="pz"?i=>i.pz:i=>i.ez,o=mo(t.Fp,n.map(r));return n.map((i,f)=>i.toAffine(o[f])).map(t.fromAffine)}function Eo(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Nn(t,e){Eo(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),o=2**t,s=je(t),i=BigInt(t);return{windows:n,windowSize:r,mask:s,maxNumber:o,shiftBy:i}}function Bo(t,e,n){const{windowSize:r,mask:o,maxNumber:s,shiftBy:i}=n;let f=Number(t&o),c=t>>i;f>r&&(f-=s,c+=Mt);const u=e*r,a=u+Math.abs(f)-1,l=f===0,h=f<0,g=e%2!==0;return{nextN:c,offset:a,isZero:l,isNeg:h,isNegF:g,offsetF:u}}function uc(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function lc(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const On=new WeakMap,Io=new WeakMap;function Un(t){return Io.get(t)||1}function Ao(t){if(t!==Xt)throw new Error("invalid wNAF")}function dc(t,e){return{constTimeNegate:le,hasPrecomputes(n){return Un(n)!==1},unsafeLadder(n,r,o=t.ZERO){let s=n;for(;r>Xt;)r&Mt&&(o=o.add(s)),s=s.double(),r>>=Mt;return o},precomputeWindow(n,r){const{windows:o,windowSize:s}=Nn(r,e),i=[];let f=n,c=f;for(let u=0;u<o;u++){c=f,i.push(c);for(let a=1;a<s;a++)c=c.add(f),i.push(c);f=c.double()}return i},wNAF(n,r,o){let s=t.ZERO,i=t.BASE;const f=Nn(n,e);for(let c=0;c<f.windows;c++){const{nextN:u,offset:a,isZero:l,isNeg:h,isNegF:g,offsetF:m}=Bo(o,c,f);o=u,l?i=i.add(le(g,r[m])):s=s.add(le(h,r[a]))}return Ao(o),{p:s,f:i}},wNAFUnsafe(n,r,o,s=t.ZERO){const i=Nn(n,e);for(let f=0;f<i.windows&&o!==Xt;f++){const{nextN:c,offset:u,isZero:a,isNeg:l}=Bo(o,f,i);if(o=c,!a){const h=r[u];s=s.add(l?h.negate():h)}}return Ao(o),s},getPrecomputes(n,r,o){let s=On.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&(typeof o=="function"&&(s=o(s)),On.set(r,s))),s},wNAFCached(n,r,o){const s=Un(n);return this.wNAF(s,this.getPrecomputes(s,n,o),r)},wNAFCachedUnsafe(n,r,o,s){const i=Un(n);return i===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,n,o),r,s)},setWindowSize(n,r){Eo(r,e),Io.set(n,r),On.delete(n)}}}function hc(t,e,n,r){let o=e,s=t.ZERO,i=t.ZERO;for(;n>Xt||r>Xt;)n&Mt&&(s=s.add(o)),r&Mt&&(i=i.add(o)),o=o.double(),n>>=Mt,r>>=Mt;return{p1:s,p2:i}}function pc(t,e,n,r){uc(n,t),lc(r,e);const o=n.length,s=r.length;if(o!==s)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,f=Jf(BigInt(o));let c=1;f>12?c=f-3:f>4?c=f-2:f>0&&(c=2);const u=je(c),a=new Array(Number(u)+1).fill(i),l=Math.floor((e.BITS-1)/c)*c;let h=i;for(let g=l;g>=0;g-=c){a.fill(i);for(let b=0;b<s;b++){const v=r[b],L=Number(v>>BigInt(g)&u);a[L]=a[L].add(n[b])}let m=i;for(let b=a.length-1,v=i;b>0;b--)v=v.add(a[b]),m=m.add(v);if(h=h.add(m),g!==0)for(let b=0;b<c;b++)h=h.double()}return h}function So(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return sc(e),e}else return Yt(t)}function gc(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const f of["p","n","h"]){const c=e[f];if(!(typeof c=="bigint"&&c>Xt))throw new Error(`CURVE.${f} must be positive bigint`)}const r=So(e.p,n.Fp),o=So(e.n,n.Fn),i=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const f of i)if(!r.isValid(e[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:o}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const de=BigInt(0),Jt=BigInt(1),Pe=BigInt(2);function bc(t){return ke(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function yc(t){const e=bc(t),{P:n,type:r,adjustScalarBytes:o,powPminus2:s,randomBytes:i}=e,f=r==="x25519";if(!f&&r!=="x448")throw new Error("invalid type");const c=i||Zt,u=f?255:448,a=f?32:56,l=BigInt(f?9:5),h=BigInt(f?121665:39081),g=f?Pe**BigInt(254):Pe**BigInt(447),m=f?BigInt(8)*Pe**BigInt(251)-Jt:BigInt(4)*Pe**BigInt(445)-Jt,b=g+m+Jt,v=d=>lt(d,n),L=V(l);function V(d){return In(v(d),a)}function C(d){const w=rt("u coordinate",d,a);return f&&(w[31]&=127),v(Le(w))}function H(d){return Le(o(rt("scalar",d,a)))}function _(d,w){const p=R(C(w),H(d));if(p===de)throw new Error("invalid private or public key received");return V(p)}function k(d){return _(d,L)}function P(d,w,p){const y=v(d*(w-p));return w=v(w-y),p=v(p+y),{x_2:w,x_3:p}}function R(d,w){Sn("u",d,de,n),Sn("scalar",w,g,b);const p=w,y=d;let x=Jt,B=de,E=d,I=Jt,S=de;for(let A=BigInt(u-1);A>=de;A--){const T=p>>A&Jt;S^=T,{x_2:x,x_3:E}=P(S,x,E),{x_2:B,x_3:I}=P(S,B,I),S=T;const U=x+B,$=v(U*U),D=x-B,q=v(D*D),j=$-q,K=E+I,et=E-I,Z=v(et*U),z=v(K*D),Ft=Z+z,yt=Z-z;E=v(Ft*Ft),I=v(y*v(yt*yt)),x=v($*q),B=v(j*($+v(h*j)))}({x_2:x,x_3:E}=P(S,x,E)),{x_2:B,x_3:I}=P(S,B,I);const O=s(B);return v(x*O)}return{scalarMult:_,scalarMultBase:k,getSharedSecret:(d,w)=>_(d,w),getPublicKey:d=>k(d),utils:{randomPrivateKey:()=>c(a)},GuBytes:L.slice()}}BigInt(0);const mc=BigInt(1),No=BigInt(2),wc=BigInt(3),xc=BigInt(5),vc=BigInt(8),Oo={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:vc,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Ec(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),s=Oo.p,f=t*t%s*t%s,c=pt(f,No,s)*f%s,u=pt(c,mc,s)*t%s,a=pt(u,xc,s)*u%s,l=pt(a,e,s)*a%s,h=pt(l,n,s)*l%s,g=pt(h,r,s)*h%s,m=pt(g,o,s)*g%s,b=pt(m,o,s)*g%s,v=pt(b,e,s)*a%s;return{pow_p_5_8:pt(v,No,s)*t%s,b2:f}}function Bc(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const _n=(()=>{const t=Oo.p;return yc({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=Ec(e);return lt(pt(n,wc,t)*r,t)},adjustScalarBytes:Bc})})();function Uo(t){t.lowS!==void 0&&Re("lowS",t.lowS),t.prehash!==void 0&&Re("prehash",t.prehash)}class Ic extends Error{constructor(e=""){super(e)}}const vt={Err:Ic,_tlv:{encode:(t,e)=>{const{Err:n}=vt;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=$e(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?$e(o.length/2|128):"";return $e(t)+s+o+e},decode(t,e){const{Err:n}=vt;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++],s=!!(o&128);let i=0;if(!s)i=o;else{const c=o&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const a of u)i=i<<8|a;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const f=e.subarray(r,r+i);if(f.length!==i)throw new n("tlv.decode: wrong value length");return{v:f,l:e.subarray(r+i)}}},_int:{encode(t){const{Err:e}=vt;if(t<he)throw new e("integer: negative integers are not allowed");let n=$e(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=vt;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ce(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=vt,o=rt("signature",t),{v:s,l:i}=r.decode(48,o);if(i.length)throw new e("invalid signature: left bytes after parsing");const{v:f,l:c}=r.decode(2,s),{v:u,l:a}=r.decode(2,c);if(a.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(f),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=vt,r=e.encode(2,n.encode(t.r)),o=e.encode(2,n.encode(t.s)),s=r+o;return e.encode(48,s)}},he=BigInt(0),pe=BigInt(1),Ac=BigInt(2),He=BigInt(3),Sc=BigInt(4);function Nc(t,e,n){function r(o){const s=t.sqr(o),i=t.mul(s,o);return t.add(t.add(i,t.mul(o,e)),n)}return r}function _o(t,e,n){const{BYTES:r}=t;function o(s){let i;if(typeof s=="bigint")i=s;else{let f=rt("private key",s);if(e){if(!e.includes(f.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(f,c.length-f.length),f=c}try{i=t.fromBytes(f)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof s}`)}}if(n&&(i=t.create(i)),!t.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}return o}function Oc(t,e={}){const{Fp:n,Fn:r}=gc("weierstrass",t,e),{h:o,n:s}=t;ke(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:i}=e;if(i&&(!n.is0(t.a)||typeof i.beta!="bigint"||typeof i.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(R,d,w){const{x:p,y}=d.toAffine(),x=n.toBytes(p);if(Re("isCompressed",w),w){f();const B=!n.isOdd(y);return Ht(To(B),x)}else return Ht(Uint8Array.of(4),x,n.toBytes(y))}function u(R){at(R);const d=n.BYTES,w=d+1,p=2*d+1,y=R.length,x=R[0],B=R.subarray(1);if(y===w&&(x===2||x===3)){const E=n.fromBytes(B);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const I=h(E);let S;try{S=n.sqrt(I)}catch(T){const U=T instanceof Error?": "+T.message:"";throw new Error("bad point: is not on curve, sqrt error"+U)}f();const O=n.isOdd(S);return(x&1)===1!==O&&(S=n.neg(S)),{x:E,y:S}}else if(y===p&&x===4){const E=n.fromBytes(B.subarray(d*0,d*1)),I=n.fromBytes(B.subarray(d*1,d*2));if(!g(E,I))throw new Error("bad point: is not on curve");return{x:E,y:I}}else throw new Error(`bad point: got length ${y}, expected compressed=${w} or uncompressed=${p}`)}const a=e.toBytes||c,l=e.fromBytes||u,h=Nc(n,t.a,t.b);function g(R,d){const w=n.sqr(d),p=h(R);return n.eql(w,p)}if(!g(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const m=n.mul(n.pow(t.a,He),Sc),b=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(m,b)))throw new Error("bad curve params: a or b");function v(R,d,w=!1){if(!n.isValid(d)||w&&n.is0(d))throw new Error(`bad point coordinate ${R}`);return d}function L(R){if(!(R instanceof _))throw new Error("ProjectivePoint expected")}const V=lo((R,d)=>{const{px:w,py:p,pz:y}=R;if(n.eql(y,n.ONE))return{x:w,y:p};const x=R.is0();d==null&&(d=x?n.ONE:n.inv(y));const B=n.mul(w,d),E=n.mul(p,d),I=n.mul(y,d);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:B,y:E}}),C=lo(R=>{if(R.is0()){if(e.allowInfinityPoint&&!n.is0(R.py))return;throw new Error("bad point: ZERO")}const{x:d,y:w}=R.toAffine();if(!n.isValid(d)||!n.isValid(w))throw new Error("bad point: x or y not field elements");if(!g(d,w))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(R,d,w,p,y){return w=new _(n.mul(w.px,R),w.py,w.pz),d=le(p,d),w=le(y,w),d.add(w)}class _{constructor(d,w,p){this.px=v("x",d),this.py=v("y",w,!0),this.pz=v("z",p),Object.freeze(this)}static fromAffine(d){const{x:w,y:p}=d||{};if(!d||!n.isValid(w)||!n.isValid(p))throw new Error("invalid affine point");if(d instanceof _)throw new Error("projective point not allowed");return n.is0(w)&&n.is0(p)?_.ZERO:new _(w,p,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){return ac(_,"pz",d)}static fromBytes(d){return at(d),_.fromHex(d)}static fromHex(d){const w=_.fromAffine(l(rt("pointHex",d)));return w.assertValidity(),w}static fromPrivateKey(d){const w=_o(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(w(d))}static msm(d,w){return pc(_,r,d,w)}precompute(d=8,w=!0){return P.setWindowSize(this,d),w||this.multiply(He),this}_setWindowSize(d){this.precompute(d)}assertValidity(){C(this)}hasEvenY(){const{y:d}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(d)}equals(d){L(d);const{px:w,py:p,pz:y}=this,{px:x,py:B,pz:E}=d,I=n.eql(n.mul(w,E),n.mul(x,y)),S=n.eql(n.mul(p,E),n.mul(B,y));return I&&S}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:d,b:w}=t,p=n.mul(w,He),{px:y,py:x,pz:B}=this;let E=n.ZERO,I=n.ZERO,S=n.ZERO,O=n.mul(y,y),A=n.mul(x,x),T=n.mul(B,B),U=n.mul(y,x);return U=n.add(U,U),S=n.mul(y,B),S=n.add(S,S),E=n.mul(d,S),I=n.mul(p,T),I=n.add(E,I),E=n.sub(A,I),I=n.add(A,I),I=n.mul(E,I),E=n.mul(U,E),S=n.mul(p,S),T=n.mul(d,T),U=n.sub(O,T),U=n.mul(d,U),U=n.add(U,S),S=n.add(O,O),O=n.add(S,O),O=n.add(O,T),O=n.mul(O,U),I=n.add(I,O),T=n.mul(x,B),T=n.add(T,T),O=n.mul(T,U),E=n.sub(E,O),S=n.mul(T,A),S=n.add(S,S),S=n.add(S,S),new _(E,I,S)}add(d){L(d);const{px:w,py:p,pz:y}=this,{px:x,py:B,pz:E}=d;let I=n.ZERO,S=n.ZERO,O=n.ZERO;const A=t.a,T=n.mul(t.b,He);let U=n.mul(w,x),$=n.mul(p,B),D=n.mul(y,E),q=n.add(w,p),j=n.add(x,B);q=n.mul(q,j),j=n.add(U,$),q=n.sub(q,j),j=n.add(w,y);let K=n.add(x,E);return j=n.mul(j,K),K=n.add(U,D),j=n.sub(j,K),K=n.add(p,y),I=n.add(B,E),K=n.mul(K,I),I=n.add($,D),K=n.sub(K,I),O=n.mul(A,j),I=n.mul(T,D),O=n.add(I,O),I=n.sub($,O),O=n.add($,O),S=n.mul(I,O),$=n.add(U,U),$=n.add($,U),D=n.mul(A,D),j=n.mul(T,j),$=n.add($,D),D=n.sub(U,D),D=n.mul(A,D),j=n.add(j,D),U=n.mul($,j),S=n.add(S,U),U=n.mul(K,j),I=n.mul(q,I),I=n.sub(I,U),U=n.mul(q,$),O=n.mul(K,O),O=n.add(O,U),new _(I,S,O)}subtract(d){return this.add(d.negate())}is0(){return this.equals(_.ZERO)}multiply(d){const{endo:w}=e;if(!r.isValidNot0(d))throw new Error("invalid scalar: out of range");let p,y;const x=B=>P.wNAFCached(this,B,_.normalizeZ);if(w){const{k1neg:B,k1:E,k2neg:I,k2:S}=w.splitScalar(d),{p:O,f:A}=x(E),{p:T,f:U}=x(S);y=A.add(U),p=H(w.beta,O,T,B,I)}else{const{p:B,f:E}=x(d);p=B,y=E}return _.normalizeZ([p,y])[0]}multiplyUnsafe(d){const{endo:w}=e,p=this;if(!r.isValid(d))throw new Error("invalid scalar: out of range");if(d===he||p.is0())return _.ZERO;if(d===pe)return p;if(P.hasPrecomputes(this))return this.multiply(d);if(w){const{k1neg:y,k1:x,k2neg:B,k2:E}=w.splitScalar(d),{p1:I,p2:S}=hc(_,p,x,E);return H(w.beta,I,S,y,B)}else return P.wNAFCachedUnsafe(p,d)}multiplyAndAddUnsafe(d,w,p){const y=this.multiplyUnsafe(w).add(d.multiplyUnsafe(p));return y.is0()?void 0:y}toAffine(d){return V(this,d)}isTorsionFree(){const{isTorsionFree:d}=e;return o===pe?!0:d?d(_,this):P.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:d}=e;return o===pe?this:d?d(_,this):this.multiplyUnsafe(o)}toBytes(d=!0){return Re("isCompressed",d),this.assertValidity(),a(_,this,d)}toRawBytes(d=!0){return this.toBytes(d)}toHex(d=!0){return ce(this.toBytes(d))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const k=r.BITS,P=dc(_,e.endo?Math.ceil(k/2):k);return _}function To(t){return Uint8Array.of(t?2:3)}function Uc(t,e,n={}){ke(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Zt,o=e.hmac||((p,...y)=>_e(e.hash,p,Ht(...y))),{Fp:s,Fn:i}=t,{ORDER:f,BITS:c}=i;function u(p){const y=f>>pe;return p>y}function a(p){return u(p)?i.neg(p):p}function l(p,y){if(!i.isValidNot0(y))throw new Error(`invalid signature ${p}: out of range 1..CURVE.n`)}class h{constructor(y,x,B){l("r",y),l("s",x),this.r=y,this.s=x,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(y){const x=i.BYTES,B=rt("compactSignature",y,x*2);return new h(i.fromBytes(B.subarray(0,x)),i.fromBytes(B.subarray(x,x*2)))}static fromDER(y){const{r:x,s:B}=vt.toSig(rt("DER",y));return new h(x,B)}assertValidity(){}addRecoveryBit(y){return new h(this.r,this.s,y)}recoverPublicKey(y){const x=s.ORDER,{r:B,s:E,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(f*Ac<x&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=I===2||I===3?B+f:B;if(!s.isValid(O))throw new Error("recovery id 2 or 3 invalid");const A=s.toBytes(O),T=t.fromHex(Ht(To((I&1)===0),A)),U=i.inv(O),$=C(rt("msgHash",y)),D=i.create(-$*U),q=i.create(E*U),j=t.BASE.multiplyUnsafe(D).add(T.multiplyUnsafe(q));if(j.is0())throw new Error("point at infinify");return j.assertValidity(),j}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,i.neg(this.s),this.recovery):this}toBytes(y){if(y==="compact")return Ht(i.toBytes(this.r),i.toBytes(this.s));if(y==="der")return sn(vt.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ce(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ce(this.toBytes("compact"))}}const g=_o(i,n.allowedPrivateKeyLengths,n.wrapPrivateKey),m={isValidPrivateKey(p){try{return g(p),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const p=f;return cc(r(vo(p)),p)},precompute(p=8,y=t.BASE){return y.precompute(p,!1)}};function b(p,y=!0){return t.fromPrivateKey(p).toBytes(y)}function v(p){if(typeof p=="bigint")return!1;if(p instanceof t)return!0;const x=rt("key",p).length,B=s.BYTES,E=B+1,I=2*B+1;if(!(n.allowedPrivateKeyLengths||i.BYTES===E))return x===E||x===I}function L(p,y,x=!0){if(v(p)===!0)throw new Error("first arg must be private key");if(v(y)===!1)throw new Error("second arg must be public key");return t.fromHex(y).multiply(g(p)).toBytes(x)}const V=e.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const y=Ce(p),x=p.length*8-c;return x>0?y>>BigInt(x):y},C=e.bits2int_modN||function(p){return i.create(V(p))},H=je(c);function _(p){return Sn("num < 2^"+c,p,he,H),i.toBytes(p)}function k(p,y,x=P){if(["recovered","canonical"].some(q=>q in x))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:E,prehash:I,extraEntropy:S}=x;E==null&&(E=!0),p=rt("msgHash",p),Uo(x),I&&(p=rt("prehashed msgHash",B(p)));const O=C(p),A=g(y),T=[_(A),_(O)];if(S!=null&&S!==!1){const q=S===!0?r(s.BYTES):S;T.push(rt("extraEntropy",q))}const U=Ht(...T),$=O;function D(q){const j=V(q);if(!i.isValidNot0(j))return;const K=i.inv(j),et=t.BASE.multiply(j).toAffine(),Z=i.create(et.x);if(Z===he)return;const z=i.create(K*i.create($+Z*A));if(z===he)return;let Ft=(et.x===Z?0:2)|Number(et.y&pe),yt=z;return E&&u(z)&&(yt=a(z),Ft^=1),new h(Z,yt,Ft)}return{seed:U,k2sig:D}}const P={lowS:e.lowS,prehash:!1},R={lowS:e.lowS,prehash:!1};function d(p,y,x=P){const{seed:B,k2sig:E}=k(p,y,x);return Qf(e.hash.outputLen,i.BYTES,o)(B,E)}t.BASE.precompute(8);function w(p,y,x,B=R){const E=p;y=rt("msgHash",y),x=rt("publicKey",x),Uo(B);const{lowS:I,prehash:S,format:O}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&!["compact","der","js"].includes(O))throw new Error('format must be "compact", "der" or "js"');const A=typeof E=="string"||en(E),T=!A&&!O&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!A&&!T)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let U,$;try{if(T)if(O===void 0||O==="js")U=new h(E.r,E.s);else throw new Error("invalid format");if(A){try{O!=="compact"&&(U=h.fromDER(E))}catch(yt){if(!(yt instanceof vt.Err))throw yt}!U&&O!=="der"&&(U=h.fromCompact(E))}$=t.fromHex(x)}catch{return!1}if(!U||I&&U.hasHighS())return!1;S&&(y=e.hash(y));const{r:D,s:q}=U,j=C(y),K=i.inv(q),et=i.create(j*K),Z=i.create(D*K),z=t.BASE.multiplyUnsafe(et).add($.multiplyUnsafe(Z));return z.is0()?!1:i.create(z.x)===D}return Object.freeze({getPublicKey:b,getSharedSecret:L,sign:d,verify:w,utils:m,Point:t,Signature:h})}function _c(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=Yt(e.n,t.nBitLength),o={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:o}}function Tc(t){const{CURVE:e,curveOpts:n}=_c(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Rc(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function $c(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Tc(t),o=Oc(e,n),s=Uc(o,r,n);return Rc(t,s)}function Tn(t,e){const n=r=>$c({...t,hash:r});return{...n(e),create:n}}const Ro={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},$o={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Co={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Cc=Yt(Ro.p),Lc=Yt($o.p),jc=Yt(Co.p),kc=Tn({...Ro,Fp:Cc,lowS:!1},Ae);Tn({...$o,Fp:Lc,lowS:!1},Zi),Tn({...Co,Fp:jc,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Gi);const Pc=kc,Rn="base10",tt="base16",Qt="base64pad",De="base64url",te="utf8",$n=0,ee=1,ge=2,Hc=0,Lo=1,be=12,Cn=32;function Dc(){const t=_n.utils.randomPrivateKey(),e=_n.getPublicKey(t);return{privateKey:st(t,tt),publicKey:st(e,tt)}}function Mc(){const t=Zt(Cn);return st(t,tt)}function Vc(t,e){const n=_n.getSharedSecret(ft(t,tt),ft(e,tt)),r=Yf(Te,n,void 0,void 0,Cn);return st(r,tt)}function qc(t){const e=Te(ft(t,tt));return st(e,tt)}function Kc(t){const e=Te(ft(t,te));return st(e,tt)}function Ln(t){return ft(`${t}`,Rn)}function Vt(t){return Number(st(t,Rn))}function jo(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ko(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Fc(t){const e=Ln(typeof t.type<"u"?t.type:$n);if(Vt(e)===ee&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ft(t.senderPublicKey,tt):void 0,r=typeof t.iv<"u"?ft(t.iv,tt):Zt(be),o=ft(t.symKey,tt),s=fo(o,r).encrypt(ft(t.message,te)),i=jn({type:e,sealed:s,iv:r,senderPublicKey:n});return t.encoding===De?jo(i):i}function zc(t){const e=ft(t.symKey,tt),{sealed:n,iv:r}=Me({encoded:t.encoded,encoding:t.encoding}),o=fo(e,r).decrypt(n);if(o===null)throw new Error("Failed to decrypt");return st(o,te)}function Gc(t,e){const n=Ln(ge),r=Zt(be),o=ft(t,te),s=jn({type:n,sealed:o,iv:r});return e===De?jo(s):s}function Zc(t,e){const{sealed:n}=Me({encoded:t,encoding:e});return st(n,te)}function jn(t){if(Vt(t.type)===ge)return st(oe([t.type,t.sealed]),Qt);if(Vt(t.type)===ee){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return st(oe([t.type,t.senderPublicKey,t.iv,t.sealed]),Qt)}return st(oe([t.type,t.iv,t.sealed]),Qt)}function Me(t){const e=(t.encoding||Qt)===De?ko(t.encoded):t.encoded,n=ft(e,Qt),r=n.slice(Hc,Lo),o=Lo;if(Vt(r)===ee){const c=o+Cn,u=c+be,a=n.slice(o,c),l=n.slice(c,u),h=n.slice(u);return{type:r,sealed:h,iv:l,senderPublicKey:a}}if(Vt(r)===ge){const c=n.slice(o),u=Zt(be);return{type:r,sealed:c,iv:u}}const s=o+be,i=n.slice(o,s),f=n.slice(s);return{type:r,sealed:f,iv:i}}function Wc(t,e){const n=Me({encoded:t,encoding:e?.encoding});return Po({type:Vt(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?st(n.senderPublicKey,tt):void 0,receiverPublicKey:e?.receiverPublicKey})}function Po(t){const e=t?.type||$n;if(e===ee){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Yc(t){return t.type===ee&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Xc(t){return t.type===ge}function Ho(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return oe([new Uint8Array([4]),e,n])}function Jc(t,e){const[n,r,o]=t.split("."),s=Buffer.from(ko(o),"base64");if(s.length!==64)throw new Error("Invalid signature length");const i=s.slice(0,32),f=s.slice(32,64),c=`${n}.${r}`,u=Te(c),a=Ho(e);if(!Pc.verify(oe([i,f]),u,a))throw new Error("Invalid signature");return Is(t).payload}const Do="irn";function Qc(t){return t?.relay||{protocol:Do}}function ta(t){const e=As[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Mo(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,""),i=t[o];n[s]=i}}),n}function ea(t){if(!t.includes("wc:")){const u=Je(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),o=t.substring(e+1,n).split("@"),s=typeof n<"u"?t.substring(n):"",i=new URLSearchParams(s),f={};i.forEach((u,a)=>{f[a]=u});const c=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:r,topic:Vo(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:Mo(f),methods:c,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function Vo(t){return t.startsWith("//")?t.substring(2):t}function qo(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(o=>{const s=o,i=n+e+s;t[s]&&(r[i]=t[s])}),r}function na(t){const e=new URLSearchParams,n=qo(t.relay);Object.keys(n).sort().forEach(o=>{e.set(o,n[o])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function ra(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var oa=Object.defineProperty,sa=Object.defineProperties,ia=Object.getOwnPropertyDescriptors,Ko=Object.getOwnPropertySymbols,fa=Object.prototype.hasOwnProperty,ca=Object.prototype.propertyIsEnumerable,Fo=(t,e,n)=>e in t?oa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aa=(t,e)=>{for(var n in e||(e={}))fa.call(e,n)&&Fo(t,n,e[n]);if(Ko)for(var n of Ko(e))ca.call(e,n)&&Fo(t,n,e[n]);return t},ua=(t,e)=>sa(t,ia(e));function qt(t){const e=[];return t.forEach(n=>{const[r,o]=n.split(":");e.push(`${r}:${o}`)}),e}function zo(t){const e=[];return Object.values(t).forEach(n=>{e.push(...qt(n.accounts))}),e}function Go(t,e){const n=[];return Object.values(t).forEach(r=>{qt(r.accounts).includes(e)&&n.push(...r.methods)}),n}function Zo(t,e){const n=[];return Object.values(t).forEach(r=>{qt(r.accounts).includes(e)&&n.push(...r.events)}),n}function la(t,e){const n=ss(t,e);if(n)throw new Error(n.message);const r={};for(const[o,s]of Object.entries(t))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)};return r}function da(t){const{proposal:{requiredNamespaces:e,optionalNamespaces:n={}},supportedNamespaces:r}=t,o=ye(e),s=ye(n),i={};Object.keys(r).forEach(u=>{const a=r[u].chains,l=r[u].methods,h=r[u].events,g=r[u].accounts;a.forEach(m=>{if(!g.some(b=>b.includes(m)))throw new Error(`No accounts provided for chain ${m} in namespace ${u}`)}),i[u]={chains:a,methods:l,events:h,accounts:g}});const f=fs(e,i,"approve()");if(f)throw new Error(f.message);const c={};return!Object.keys(e).length&&!Object.keys(n).length?i:(Object.keys(o).forEach(u=>{const a=r[u].chains.filter(m=>{var b,v;return(v=(b=o[u])==null?void 0:b.chains)==null?void 0:v.includes(m)}),l=r[u].methods.filter(m=>{var b,v;return(v=(b=o[u])==null?void 0:b.methods)==null?void 0:v.includes(m)}),h=r[u].events.filter(m=>{var b,v;return(v=(b=o[u])==null?void 0:b.events)==null?void 0:v.includes(m)}),g=a.map(m=>r[u].accounts.filter(b=>b.includes(`${m}:`))).flat();c[u]={chains:a,methods:l,events:h,accounts:g}}),Object.keys(s).forEach(u=>{var a,l,h,g,m,b;if(!r[u])return;const v=(l=(a=s[u])==null?void 0:a.chains)==null?void 0:l.filter(H=>r[u].chains.includes(H)),L=r[u].methods.filter(H=>{var _,k;return(k=(_=s[u])==null?void 0:_.methods)==null?void 0:k.includes(H)}),V=r[u].events.filter(H=>{var _,k;return(k=(_=s[u])==null?void 0:_.events)==null?void 0:k.includes(H)}),C=v?.map(H=>r[u].accounts.filter(_=>_.includes(`${H}:`))).flat();c[u]={chains:ct((h=c[u])==null?void 0:h.chains,v),methods:ct((g=c[u])==null?void 0:g.methods,L),events:ct((m=c[u])==null?void 0:m.events,V),accounts:ct((b=c[u])==null?void 0:b.accounts,C)}}),c)}function kn(t){return t.includes(":")}function Wo(t){return kn(t)?t.split(":")[0]:t}function ye(t){var e,n,r;const o={};if(!Ve(t))return o;for(const[s,i]of Object.entries(t)){const f=kn(s)?[s]:i.chains,c=i.methods||[],u=i.events||[],a=Wo(s);o[a]=ua(aa({},o[a]),{chains:ct(f,(e=o[a])==null?void 0:e.chains),methods:ct(c,(n=o[a])==null?void 0:n.methods),events:ct(u,(r=o[a])==null?void 0:r.events)})}return o}function Yo(t){const e={};return t?.forEach(n=>{var r;const[o,s]=n.split(":");e[o]||(e[o]={accounts:[],chains:[],events:[],methods:[]}),e[o].accounts.push(n),(r=e[o].chains)==null||r.push(`${o}:${s}`)}),e}function ha(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=Yo(e);for(const[r,o]of Object.entries(n))o.methods?o.methods=ct(o.methods,t):o.methods=t,o.events=["chainChanged","accountsChanged"];return n}function pa(t,e){var n,r,o,s,i,f;const c=ye(t),u=ye(e),a={},l=Object.keys(c).concat(Object.keys(u));for(const h of l)a[h]={chains:ct((n=c[h])==null?void 0:n.chains,(r=u[h])==null?void 0:r.chains),methods:ct((o=c[h])==null?void 0:o.methods,(s=u[h])==null?void 0:s.methods),events:ct((i=c[h])==null?void 0:i.events,(f=u[h])==null?void 0:f.events)};return a}const Xo={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Jo={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Et(t,e){const{message:n,code:r}=Jo[t];return{message:e?`${n} ${e}`:n,code:r}}function Kt(t,e){const{message:n,code:r}=Xo[t];return{message:e?`${n} ${e}`:n,code:r}}function me(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ve(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function kt(t){return typeof t>"u"}function it(t,e){return e&&kt(t)?!0:typeof t=="string"&&!!t.trim().length}function qe(t,e){return e&&kt(t)?!0:typeof t=="number"&&!isNaN(t)}function ga(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),o=Object.keys(n);let s=!0;return It(o,r)?(r.forEach(i=>{const{accounts:f,methods:c,events:u}=t.namespaces[i],a=qt(f),l=n[i];(!It(ve(i,l),a)||!It(l.methods,c)||!It(l.events,u))&&(s=!1)}),s):!1}function we(t){return it(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Qo(t){if(it(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&we(n)}}return!1}function ba(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(it(t,!1)){if(e(t))return!0;const n=Je(t);return e(n)}}catch{}return!1}function ya(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function ma(t){return t?.topic}function wa(t,e){let n=null;return it(t?.publicKey,!1)||(n=Et("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Pn(t){let e=!0;return me(t)?t.length&&(e=t.every(n=>it(n,!1))):e=!1,e}function ts(t,e,n){let r=null;return me(e)&&e.length?e.forEach(o=>{r||we(o)||(r=Kt("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):we(t)||(r=Kt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function es(t,e,n){let r=null;return Object.entries(t).forEach(([o,s])=>{if(r)return;const i=ts(o,ve(o,s),`${e} ${n}`);i&&(r=i)}),r}function ns(t,e){let n=null;return me(t)?t.forEach(r=>{n||Qo(r)||(n=Kt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Kt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function rs(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const o=ns(r?.accounts,`${e} namespace`);o&&(n=o)}),n}function os(t,e){let n=null;return Pn(t?.methods)?Pn(t?.events)||(n=Kt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Kt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function Hn(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const o=os(r,`${e}, namespace`);o&&(n=o)}),n}function xa(t,e,n){let r=null;if(t&&Ve(t)){const o=Hn(t,e);o&&(r=o);const s=es(t,e,n);s&&(r=s)}else r=Et("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function ss(t,e){let n=null;if(t&&Ve(t)){const r=Hn(t,e);r&&(n=r);const o=rs(t,e);o&&(n=o)}else n=Et("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function is(t){return it(t.protocol,!0)}function va(t,e){let n=!1;return e&&!t?n=!0:t&&me(t)&&t.length&&t.forEach(r=>{n=is(r)}),n}function Ea(t){return typeof t=="number"}function Ba(t){return typeof t<"u"&&typeof t!==null}function Ia(t){return!(!t||typeof t!="object"||!t.code||!qe(t.code,!1)||!t.message||!it(t.message,!1))}function Aa(t){return!(kt(t)||!it(t.method,!1))}function Sa(t){return!(kt(t)||kt(t.result)&&kt(t.error)||!qe(t.id,!1)||!it(t.jsonrpc,!1))}function Na(t){return!(kt(t)||!it(t.name,!1))}function Oa(t,e){return!(!we(e)||!zo(t).includes(e))}function Ua(t,e,n){return it(n,!1)?Go(t,e).includes(n):!1}function _a(t,e,n){return it(n,!1)?Zo(t,e).includes(n):!1}function fs(t,e,n){let r=null;const o=Ta(t),s=Ra(e),i=Object.keys(o),f=Object.keys(s),c=cs(Object.keys(t)),u=cs(Object.keys(e)),a=c.filter(l=>!u.includes(l));return a.length&&(r=Et("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${a.toString()}
      Received: ${Object.keys(e).toString()}`)),It(i,f)||(r=Et("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${i.toString()}
      Approved: ${f.toString()}`)),Object.keys(e).forEach(l=>{if(!l.includes(":")||r)return;const h=qt(e[l].accounts);h.includes(l)||(r=Et("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${l}
        Required: ${l}
        Approved: ${h.toString()}`))}),i.forEach(l=>{r||(It(o[l].methods,s[l].methods)?It(o[l].events,s[l].events)||(r=Et("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${l}`)):r=Et("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${l}`))}),r}function Ta(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(o=>{e[o]={methods:t[n].methods,events:t[n].events}})}),e}function cs(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Ra(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=qt(t[n].accounts);r?.forEach(o=>{e[o]={accounts:t[n].accounts.filter(s=>s.includes(`${o}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function $a(t,e){return qe(t,!1)&&t<=e.max&&t>=e.min}function Ca(){const t=Pt();return new Promise(e=>{switch(t){case J.browser:e(as());break;case J.reactNative:e(us());break;case J.node:e(ls());break;default:e(!0)}})}function as(){return zt()&&navigator?.onLine}async function us(){if(Bt()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function ls(){return!0}function La(t){switch(Pt()){case J.browser:ds(t);break;case J.reactNative:hs(t);break;case J.node:break}}function ds(t){!Bt()&&zt()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function hs(t){Bt()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function ja(){var t;return zt()&&ne()?((t=ne())==null?void 0:t.visibilityState)==="visible":!0}const Dn={};class ka{static get(e){return Dn[e]}static set(e,n){Dn[e]=n}static delete(e){delete Dn[e]}}function ps(t){const e=re.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function gs({publicKey:t,signature:e,payload:n}){var r;const o=Mn(n.method),s=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),i=Ha(n.address),f=n.era==="00"?new Uint8Array([0]):Mn(n.era);if(f.length!==1&&f.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),u=new Uint8Array([c&255,c>>8&255]),a=BigInt(`0x${Pa(n.tip)}`),l=Ma(a),h=new Uint8Array([0,...t,i,...e,...f,...u,...l,...o]),g=Da(h.length+1);return new Uint8Array([...g,s,...h])}function bs(t){const e=Mn(t),n=Ss(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function Mn(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Pa(t){return t.startsWith("0x")?t.slice(2):t}function Ha(t){const e=re.decode(t)[0];return e===42?0:e===60?2:1}function Da(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Ma(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Va(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=ps(t.transaction.address),r=gs({publicKey:n,signature:e,payload:t.transaction}),o=Buffer.from(r).toString("hex");return bs(o)}export{Rn as BASE10,tt as BASE16,Qt as BASE64,De as BASE64URL,Ps as COLON,Ze as DEFAULT_DEPTH,Ee as EMPTY_SPACE,J as ENV_MAP,Jo as INTERNAL_ERRORS,ka as MemoryStore,Hs as ONE_THOUSAND,tr as REACT_NATIVE_PRODUCT,Do as RELAYER_DEFAULT_PROTOCOL,Xo as SDK_ERRORS,nr as SDK_TYPE,er as SLASH,$n as TYPE_0,ee as TYPE_1,ge as TYPE_2,te as UTF8,Wr as addResourceToRecap,gs as addSignatureToExtrinsic,rr as appendToQueryString,Gs as assertType,dn as assignAbilityToActions,Gr as base64Decode,zr as base64Encode,da as buildApprovedNamespaces,bf as buildAuthObject,ha as buildNamespacesFromAuth,Xr as buildRecapStatement,Va as buildSignedExtrinsicHash,si as calcExpiry,Qs as capitalize,ur as capitalizeWord,ti as createDelayedPromise,xf as createEncodedRecap,ei as createExpiringPromise,Zr as createRecap,Lt as decodeRecap,Vt as decodeTypeByte,Zc as decodeTypeTwoEnvelope,zc as decrypt,bs as deriveExtrinsicHash,Vc as deriveSymKey,Me as deserialize,Ne as encodeRecap,Ln as encodeTypeByte,Gc as encodeTypeTwoEnvelope,Fc as encrypt,fi as engineEvent,Js as enumify,rf as extractSolanaTransactionId,Gn as formatAccountId,Ns as formatAccountWithChain,zn as formatChainId,lr as formatDeeplinkUrl,Ye as formatExpirerTarget,ri as formatIdTarget,Vr as formatMessage,Zs as formatMessageContext,qo as formatRelayParams,Fs as formatRelayRpcUrl,pn as formatStatementFromRecap,ni as formatTopicTarget,fr as formatUA,na as formatUri,Je as fromBase64,Dc as generateKeyPair,Mc as generateRandomBytes32,qt as getAccountsChains,Us as getAccountsFromNamespaces,Zn as getAddressFromAccount,Os as getAddressesFromAccounts,ff as getAlgorandTransactionId,Vs as getAppId,or as getAppMetadata,as as getBrowserOnlineStatus,Wn as getChainFromAccount,Yn as getChainsFromAccounts,ve as getChainsFromNamespace,_s as getChainsFromNamespaces,Bf as getChainsFromRecap,Ts as getChainsFromRequiredNamespaces,Xe as getCommonValuesInArrays,Ho as getCryptoKeyFromKeyData,qr as getDecodedRecapFromResources,ai as getDeepLink,ln as getDidAddress,Se as getDidAddressSegments,Dr as getDidChainId,Pt as getEnvironment,zs as getHttpUrl,Et as getInternalError,ir as getJavascriptID,sr as getJavascriptOS,ar as getLastItems,ra as getLinkModeURL,Ef as getMethodsFromRecap,Mr as getNamespacedDidChainId,zo as getNamespacesChains,Zo as getNamespacesEventsForChainId,Yo as getNamespacesFromAccounts,Go as getNamespacesMethodsForChainId,sf as getNearTransactionIdFromSignedTransaction,jr as getNearUint8ArrayFromBytes,ls as getNodeOnlineStatus,Fr as getReCapActions,us as getReactNativeOnlineStatus,wf as getRecapAbilitiesFromResource,Oe as getRecapFromResources,Kr as getRecapResource,Ks as getRelayClientMetadata,ta as getRelayProtocolApi,Qc as getRelayProtocolName,la as getRequiredNamespacesFromNamespaces,Kt as getSdkError,ui as getSearchParamFromURL,cf as getSignDirectHash,of as getSuiDigest,Ge as getUniqueValues,ci as handleDeeplinkRedirect,It as hasOverlap,cn as hashEthereumMessage,qc as hashKey,Kc as hashMessage,Ds as isAndroid,ja as isAppVisible,zt as isBrowser,kn as isCaipNamespace,fs as isConformingNamespaces,ii as isExpired,pr as isIframe,Ms as isIos,We as isNode,Ca as isOnline,ya as isProposalStruct,Bt as isReactNative,hn as isRecap,ga as isSessionCompatible,ma as isSessionStruct,hr as isTelegram,di as isTestRun,Yc as isTypeOneEnvelope,Xc as isTypeTwoEnvelope,kt as isUndefined,Qo as isValidAccountId,ns as isValidAccounts,os as isValidActions,me as isValidArray,we as isValidChainId,ts as isValidChains,wa as isValidController,Lr as isValidEip1271Signature,Cr as isValidEip191Signature,Ia as isValidErrorReason,Na as isValidEvent,Ea as isValidId,rs as isValidNamespaceAccounts,Hn as isValidNamespaceActions,es as isValidNamespaceChains,Pn as isValidNamespaceMethodsOrEvents,ss as isValidNamespaces,Oa as isValidNamespacesChainId,_a as isValidNamespacesEvent,Ua as isValidNamespacesRequest,qe as isValidNumber,Ve as isValidObject,Ba as isValidParams,bt as isValidRecap,is as isValidRelay,va as isValidRelays,Aa as isValidRequest,$a as isValidRequestExpiry,xa as isValidRequiredNamespaces,Sa as isValidResponse,it as isValidString,ba as isValidUrl,Xs as mapEntries,Ws as mapToObj,ct as mergeArrays,vf as mergeEncodedRecaps,Yr as mergeRecaps,pa as mergeRequiredAndOptionalNamespaces,ye as normalizeNamespaces,Ys as objToMap,dr as openDeeplink,ze as parseAccountId,Fe as parseChainId,cr as parseContextNames,oi as parseExpirerTarget,Wo as parseNamespaceKey,Mo as parseRelayParams,Vo as parseTopic,ea as parseUri,qs as populateAppMetadata,yf as populateAuthPayload,mf as recapHasResource,jn as serialize,hi as sleep,ps as ss58AddressToPublicKey,ds as subscribeToBrowserNetworkChange,La as subscribeToNetworkChange,hs as subscribeToReactNativeNetworkChange,gr as toBase64,li as uuidv4,Wc as validateDecoding,Po as validateEncoding,gf as validateSignedCacao,Jc as verifyP256Jwt,$r as verifySignature};
//# sourceMappingURL=index.es.js.map
